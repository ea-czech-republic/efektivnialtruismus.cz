{% extends "base.html" %}

{% load wagtailcore_tags %}
{% load wagtailimages_tags %}
{% load i18n %}
{% load menu_tags %}
{% load static %}
{% load wagtailuserbar %}

{% block extra_css %}
    <link href="https://fonts.googleapis.com/css?family=Titillium+Web:400,700&display=swap&subset=latin-ext" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="{% static 'css/eacr.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.0.1/css/tempusdominus-bootstrap-4.min.css" />
{% endblock %}

{% block extra_head %}
    <script>
       (function(h,o,t,j,a,r){
           h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
           h._hjSettings={hjid:739132,hjsv:6};
           a=o.getElementsByTagName('head')[0];
           r=o.createElement('script');r.async=1;
           r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
           a.appendChild(r);
       })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
    </script>

    <!-- Global site tag (gtag.js) - Google AdWords: 866290173 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-866290173"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'AW-866290173');
    </script>

    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            'gtm.start':
                new Date().getTime(), event: 'gtm.js'
        });
        var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src =
            'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-MXM5KZ9');</script>
    <!-- End Google Tag Manager -->

    {% block for_conversion_head %}
        {# this is used in conversion.html #}
    {% endblock %}
{% endblock %}

{% block body_class %}template-thesisbase{% endblock %}

{% block base_content %}
    <!-- Google Tag Manager (noscript) -->
    <noscript>
        <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MXM5KZ9"
                height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->

    {% flat_menu handle="theses_menu" template="menus/theses_menu.html" %}

    {% block content %}
    {% endblock %}

    <footer class="bg-primary text-white py-4" role="contentinfo">
        <div class="container">
            <div class="row">
                <div class="col-md-8 order-md-2 mb-3">
                    <h3>Stay in touch</h3>
                    <p>Are you interested in this project but now it's not the
                        right time for you to use it? Stay in touch and get our quarterly updates.
                    </p>
                    <div id="newsletter">
                        <form id="newsletter_form" action="/theses/newsletter/" method="POST">
                            <div class="row">
                                <div class="col-lg-9">
                                    <div class="form-group">
                                        <input type="text" name="contact_name" placeholder="YOUR FULL NAME"
                                               class="form-control"
                                               required="" id="id_contact_name">
                                    </div>
                                    <div class="form-group">
                                        <input type="email" name="contact_email" class="form-control" placeholder="EMAIL"
                                               required="" id="id_contact_email">
                                    </div>
                                    <div class="float-right">
                                        <input type="submit" value="Subscribe" class="btn btn-secondary">
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="col-md-4 order-md-1">
                    <h3>Effective Thesis</h3>
                    <p><a href="/project#ask-anything">Contact</a></p>
                    <p>Â© 2018 Effective altruism CZ. <a href="https://github.com/ea-czech-republic/efektivnialtruismus.cz/">Github EA CZ</a></p>
                </div>

            </div>
        </div>
    </footer>

    <script type="text/javascript" id="cookieinfo"
            src="//cookieinfoscript.com/js/cookieinfo.min.js"
            data-close-text="Got it!">
    </script>

{% endblock %}

{% block extra_js %}
    <script src="{% static "js/theses.js" %}"></script>
    {# TODO: Do we need a datepicker? #}
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.0.1/js/tempusdominus-bootstrap-4.min.js"></script>

    <script>
    $("#newsletter_form").submit(function(e) {

        e.preventDefault();

        var frm = $('#newsletter_form');

        $.ajax({
            url: frm.attr('action'),
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            data: JSON.stringify(frm.serializeArray()),
               success: function(data)
               {
                   $("#newsletter").html(data);
               }
         });
    });
    </script>
    {% block extra_js_2 %}
    {% endblock %}

{% endblock %}

{% block google_analytics %}
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-77119148-3"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());
        gtag('config', 'UA-77119148-3');
    </script>

{% endblock %}
